#N canvas 0 86 1366 682 10;
#X obj 1032 206 line~;
#X obj 1032 238 osc~;
#X obj 1032 282 delwrite~ buff1 10000;
#X obj 1189 360 sig~;
#X floatatom 1189 336 5 0 0 0 - - -, f 5;
#X obj 1190 390 vd~ buff1;
#X floatatom 1210 420 5 0 0 0 - - -, f 5;
#X obj 1331 359 sig~;
#X floatatom 1331 335 5 0 0 0 - - -, f 5;
#X obj 1332 389 vd~ buff1;
#X floatatom 1352 419 5 0 0 0 - - -, f 5;
#X obj 1472 360 sig~;
#X floatatom 1472 336 5 0 0 0 - - -, f 5;
#X obj 1473 390 vd~ buff1;
#X floatatom 1493 420 5 0 0 0 - - -, f 5;
#X obj 1614 359 sig~;
#X floatatom 1614 335 5 0 0 0 - - -, f 5;
#X obj 1615 389 vd~ buff1;
#X floatatom 1635 419 5 0 0 0 - - -, f 5;
#X obj 1322 556 hip~ 5;
#X obj 1323 589 dac~;
#X text 1084 238 instead of microphone input;
#X text 1187 315 loop duration;
#X text 1328 312 loop duration;
#X text 1470 312 loop duration;
#X text 1614 311 loop duration;
#X obj 1029 118 * 20;
#X msg 1032 176 \$1 200;
#X obj 1031 147 + 100;
#X msg 1333 236 121;
#X msg 1367 237 245;
#X msg 1404 237 456;
#X msg 1438 238 786;
#X obj 1323 528 *~ 0.5;
#X obj 1339 192 loadbang;
#X obj 1472 442 *~ 0.2;
#X obj 1614 441 *~ 0.1;
#X obj 1331 441 *~ 0.2;
#X obj 1189 442 *~ 0.2;
#X obj 544 66 route list;
#X obj 544 35 receive fromNetwork;
#X obj 528 705 vsl 30 256 -2 2 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 11323 1;
#X obj 847 707 vsl 30 256 -2 2 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 7318 1;
#X obj 577 706 hsl 256 30 -2 2 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 12001 1;
#X text 541 19 values received from the ESP32;
#X obj 1382 526 r vol_master;
#X text 1226 80 An experiment in delay buffers controlled by one parameter
;
#X msg 415 35 \; pd dsp 1;
#X text 440 73 ON;
#X obj 414 2 loadbang;
#X obj 49 81 receive fromGUI;
#X obj 50 112 list trim;
#X obj 54 212 r volume;
#X obj 47 164 s volume;
#X obj 53 251 sel 1 0;
#X msg 82 282 0;
#X msg 48 282 0.9;
#X text 39 56 Messages received from the phone;
#X obj 48 328 s vol_master;
#X obj 36 828 send toGUI, f 33;
#N canvas 3 94 700 457 speedControl 0;
#X obj 28 238 inlet;
#X obj 13 269 f;
#X obj 13 292 outlet;
#X obj 27 127 loadbang;
#X obj 75 238 inlet;
#X obj 60 269 f;
#X obj 60 292 outlet;
#X obj 121 239 inlet;
#X obj 106 270 f;
#X obj 106 293 outlet;
#X obj 45 157 metro 100;
#X text 173 22 Updating your phone display can take a bit of time.
As we expect values from the ESP32 every 3 or 4 ms \, we impose here
a slower rate for the values sent to the display. Audio synthesis is
not affected by this subpatch. It runs at full ESP32 rate.;
#X text 196 181 add one of this for each inout you want to control
;
#X obj 168 240 inlet;
#X obj 153 271 f;
#X obj 153 294 outlet;
#X obj 240 244 inlet;
#X obj 225 275 f;
#X obj 225 298 outlet;
#X obj 285 243 inlet;
#X obj 270 274 f;
#X obj 270 297 outlet;
#X obj 329 241 inlet;
#X obj 314 272 f;
#X obj 314 295 outlet;
#X obj 382 243 inlet;
#X obj 367 274 f;
#X obj 367 297 outlet;
#X obj 427 242 inlet;
#X obj 412 273 f;
#X obj 412 296 outlet;
#X obj 471 240 inlet;
#X obj 456 271 f;
#X obj 456 294 outlet;
#X obj 524 246 inlet;
#X obj 509 277 f;
#X obj 509 300 outlet;
#X obj 569 245 inlet;
#X obj 554 276 f;
#X obj 554 299 outlet;
#X obj 613 243 inlet;
#X obj 598 274 f;
#X obj 598 297 outlet;
#X connect 0 0 1 1;
#X connect 1 0 2 0;
#X connect 3 0 10 0;
#X connect 4 0 5 1;
#X connect 5 0 6 0;
#X connect 7 0 8 1;
#X connect 8 0 9 0;
#X connect 10 0 1 0;
#X connect 10 0 5 0;
#X connect 10 0 8 0;
#X connect 10 0 14 0;
#X connect 10 0 17 0;
#X connect 10 0 20 0;
#X connect 10 0 23 0;
#X connect 10 0 26 0;
#X connect 10 0 29 0;
#X connect 10 0 32 0;
#X connect 10 0 35 0;
#X connect 10 0 38 0;
#X connect 10 0 41 0;
#X connect 13 0 14 1;
#X connect 14 0 15 0;
#X connect 16 0 17 1;
#X connect 17 0 18 0;
#X connect 19 0 20 1;
#X connect 20 0 21 0;
#X connect 22 0 23 1;
#X connect 23 0 24 0;
#X connect 25 0 26 1;
#X connect 26 0 27 0;
#X connect 28 0 29 1;
#X connect 29 0 30 0;
#X connect 31 0 32 1;
#X connect 32 0 33 0;
#X connect 34 0 35 1;
#X connect 35 0 36 0;
#X connect 37 0 38 1;
#X connect 38 0 39 0;
#X connect 40 0 41 1;
#X connect 41 0 42 0;
#X restore 86 624 pd speedControl, f 27;
#X text 256 623 control the sending rate;
#X obj 148 666 pack f f;
#X text -1 507 Sending values to the phone app;
#X obj 129 169 unpack f f f;
#X obj 246 202 s p_value;
#X obj 128 202 s p_column;
#X obj 195 202 s p_row;
#X text 161 99 For example \, /on controls the main volume;
#X text 164 114 we also receive the infomation of presets;
#X obj 544 108 route /analog /accelero /gyro /angles;
#X obj 519 141 s analog;
#X obj 581 142 s accelero;
#X obj 653 143 s gyro;
#X obj 708 143 s angles;
#X obj 573 288 r analog;
#X obj 573 318 unpack \$1 \$2 \$3 \$4;
#X text 8 877 Marije Baalman Wind Instrument Building Workshop adapted
from: Enrique Tomas flying-interfaces Workshop https://github.com/ultranoise/flying-interfaces/blob/master/README.md
;
#X obj 572 467 s ana0;
#X obj 618 467 s ana1;
#X obj 664 468 s ana2;
#X obj 709 466 s ana3;
#X obj 627 824 unpack \$1 \$2 \$3;
#X obj 626 858 s accx;
#X obj 672 859 s accy;
#X obj 724 859 s accz;
#X obj 627 785 r accelero;
#X obj 574 678 r accx;
#X obj 849 680 r accz;
#X obj 529 680 r accy;
#X floatatom 568 350 5 0 0 0 - - -, f 5;
#X floatatom 716 352 5 0 0 0 - - -, f 5;
#X floatatom 663 351 5 0 0 0 - - -, f 5;
#X floatatom 612 351 5 0 0 0 - - -, f 5;
#X floatatom 483 393 5 0 0 0 - - -, f 5;
#X floatatom 525 391 5 0 1 0 - - -, f 5;
#X text 523 365 max;
#X text 480 369 min;
#X obj 586 505 vsl 15 128 0 1 0 0 empty empty empty 0 -9 0 10 -257985
-1 -1 2691 1;
#X obj 464 417 expr ($f1-$f2)/($f3-$f2);
#X floatatom 652 398 5 0 0 0 - - -, f 5;
#X floatatom 694 396 5 0 1 0 - - -, f 5;
#X text 692 370 max;
#X text 649 374 min;
#X obj 626 424 expr ($f1-$f2)/($f3-$f2);
#X floatatom 809 392 5 0 0 0 - - -, f 5;
#X text 849 364 max;
#X text 806 368 min;
#X obj 790 416 expr ($f1-$f2)/($f3-$f2);
#X floatatom 801 475 5 0 0 0 - - -, f 5;
#X floatatom 843 473 5 0 1 0 - - -, f 5;
#X text 841 447 max;
#X text 798 451 min;
#X obj 782 499 expr ($f1-$f2)/($f3-$f2);
#X obj 11 531 r ana0;
#X obj 81 598 r ana3;
#X obj 59 576 r ana2;
#X obj 35 553 r ana1;
#X msg 11 657 list /analog0 \$1;
#X msg 21 681 list /analog1 \$1;
#X msg 31 705 list /analog2 \$1;
#X msg 41 732 list /analog3 \$1;
#X floatatom 851 390 5 0 1 0 - - -, f 5;
#X obj 471 318 loadbang;
#X obj 633 508 vsl 15 128 0 1 0 0 empty empty empty 0 -9 0 10 -257985
-1 -1 0 1;
#X obj 676 504 vsl 15 128 0 1 0 0 empty empty empty 0 -9 0 10 -257985
-1 -1 0 1;
#X obj 722 505 vsl 15 128 0 1 0 0 empty empty empty 0 -9 0 10 -257985
-1 -1 0 1;
#X obj 116 532 r accx;
#X obj 128 556 r accy;
#X obj 144 580 r accz;
#X obj 268 682 pack f f;
#X obj 393 721 pack f f;
#X msg 269 709 list /gyroxy \$1 \$2;
#X msg 283 734 list /gyroz \$1;
#X msg 394 748 list /anglexy \$1 \$2;
#X msg 417 772 list /anglez \$1;
#X obj 937 708 vsl 30 256 -2 2 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 0 1;
#X obj 1256 710 vsl 30 256 -2 2 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 0 1;
#X obj 986 709 hsl 256 30 -2 2 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X obj 1036 827 unpack \$1 \$2 \$3;
#X obj 928 678 r gyroy;
#X obj 983 681 r gyrox;
#X obj 1258 683 r gyroz;
#X obj 1036 788 r gyro;
#X obj 1035 861 s gyrox;
#X obj 1083 884 s gyroy;
#X obj 1133 862 s gyroz;
#X obj 175 531 r gyrox;
#X obj 187 555 r gyroy;
#X obj 203 579 r gyroz;
#X obj 1330 712 vsl 30 256 -2 2 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 0 1;
#X obj 1649 714 vsl 30 256 -2 2 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 0 1;
#X obj 1379 713 hsl 256 30 -2 2 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X obj 1429 831 unpack \$1 \$2 \$3;
#X obj 1429 792 r angles;
#X obj 1321 682 r angley;
#X obj 1376 685 r anglex;
#X obj 1651 687 r anglez;
#X obj 1428 865 s anglex;
#X obj 1476 888 s angley;
#X obj 1526 866 s anglez;
#X obj 1029 78 r anglex;
#X text 969 46 set the control parameter here;
#X msg 149 693 list /accelxy \$1 \$2;
#X msg 165 716 list /accelz \$1;
#X obj 49 140 route /on /presets /motionChoice;
#X obj 336 183 print;
#X obj 338 215 unpack f f f;
#X obj 277 766 select 1;
#X obj 299 787 select 1;
#X obj 408 803 select 1;
#X obj 430 824 select 1;
#X obj 171 787 spigot;
#X obj 149 766 spigot;
#X obj 206 760 tgl 15 0 empty empty empty 0 -6 0 8 -262144 -1 -1 0
1;
#X obj 183 742 tgl 15 0 empty empty empty 0 -6 0 8 -262144 -1 -1 0
1;
#X obj 278 404 select 0 1 2;
#X obj 337 248 s m_which;
#X obj 411 248 s m_whichVal;
#X obj 316 534 print;
#X obj 278 347 r m_which;
#X obj 290 488 spigot;
#X obj 290 447 r m_whichVal;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 5 0 38 0;
#X connect 6 0 38 1;
#X connect 7 0 9 0;
#X connect 8 0 7 0;
#X connect 9 0 37 0;
#X connect 10 0 37 1;
#X connect 11 0 13 0;
#X connect 12 0 11 0;
#X connect 13 0 35 0;
#X connect 14 0 35 1;
#X connect 15 0 17 0;
#X connect 16 0 15 0;
#X connect 17 0 36 0;
#X connect 18 0 36 1;
#X connect 19 0 20 0;
#X connect 19 0 20 1;
#X connect 26 0 28 0;
#X connect 27 0 0 0;
#X connect 28 0 27 0;
#X connect 29 0 4 0;
#X connect 30 0 8 0;
#X connect 31 0 12 0;
#X connect 32 0 16 0;
#X connect 33 0 19 0;
#X connect 34 0 29 0;
#X connect 34 0 30 0;
#X connect 34 0 31 0;
#X connect 34 0 32 0;
#X connect 35 0 2 0;
#X connect 35 0 33 0;
#X connect 36 0 2 0;
#X connect 36 0 33 0;
#X connect 37 0 2 0;
#X connect 37 0 33 0;
#X connect 38 0 2 0;
#X connect 38 0 33 0;
#X connect 39 0 70 0;
#X connect 40 0 39 0;
#X connect 45 0 33 1;
#X connect 49 0 47 0;
#X connect 50 0 51 0;
#X connect 51 0 165 0;
#X connect 52 0 54 0;
#X connect 54 0 56 0;
#X connect 54 1 55 0;
#X connect 55 0 58 0;
#X connect 56 0 58 0;
#X connect 60 0 118 0;
#X connect 60 1 119 0;
#X connect 60 2 120 0;
#X connect 60 3 121 0;
#X connect 60 4 62 0;
#X connect 60 5 62 1;
#X connect 60 6 164 0;
#X connect 60 7 130 0;
#X connect 60 8 130 1;
#X connect 60 9 133 0;
#X connect 60 10 131 0;
#X connect 60 11 131 1;
#X connect 60 12 135 0;
#X connect 62 0 163 0;
#X connect 64 0 66 0;
#X connect 64 1 67 0;
#X connect 64 2 65 0;
#X connect 70 0 71 0;
#X connect 70 1 72 0;
#X connect 70 2 73 0;
#X connect 70 3 74 0;
#X connect 75 0 76 0;
#X connect 76 0 90 0;
#X connect 76 1 93 0;
#X connect 76 2 92 0;
#X connect 76 3 91 0;
#X connect 82 0 83 0;
#X connect 82 1 84 0;
#X connect 82 2 85 0;
#X connect 86 0 82 0;
#X connect 87 0 43 0;
#X connect 88 0 42 0;
#X connect 89 0 41 0;
#X connect 90 0 99 0;
#X connect 91 0 113 0;
#X connect 92 0 108 0;
#X connect 93 0 104 0;
#X connect 94 0 99 1;
#X connect 95 0 99 2;
#X connect 99 0 78 0;
#X connect 99 0 98 0;
#X connect 100 0 104 1;
#X connect 101 0 104 2;
#X connect 104 0 79 0;
#X connect 104 0 124 0;
#X connect 105 0 108 1;
#X connect 108 0 80 0;
#X connect 108 0 125 0;
#X connect 109 0 113 1;
#X connect 110 0 113 2;
#X connect 113 0 81 0;
#X connect 113 0 126 0;
#X connect 114 0 60 0;
#X connect 115 0 60 3;
#X connect 116 0 60 2;
#X connect 117 0 60 1;
#X connect 118 0 59 0;
#X connect 119 0 59 0;
#X connect 120 0 59 0;
#X connect 121 0 59 0;
#X connect 122 0 108 2;
#X connect 123 0 94 0;
#X connect 123 0 95 0;
#X connect 123 0 100 0;
#X connect 123 0 101 0;
#X connect 123 0 105 0;
#X connect 123 0 122 0;
#X connect 127 0 60 4;
#X connect 128 0 60 5;
#X connect 129 0 60 6;
#X connect 130 0 132 0;
#X connect 131 0 134 0;
#X connect 132 0 168 0;
#X connect 133 0 169 0;
#X connect 139 0 144 0;
#X connect 139 1 145 0;
#X connect 139 2 146 0;
#X connect 140 0 136 0;
#X connect 141 0 138 0;
#X connect 142 0 137 0;
#X connect 143 0 139 0;
#X connect 147 0 60 7;
#X connect 148 0 60 8;
#X connect 149 0 60 9;
#X connect 153 0 158 0;
#X connect 153 1 159 0;
#X connect 153 2 160 0;
#X connect 154 0 153 0;
#X connect 155 0 150 0;
#X connect 156 0 152 0;
#X connect 157 0 151 0;
#X connect 161 0 26 0;
#X connect 163 0 173 0;
#X connect 164 0 172 0;
#X connect 165 0 53 0;
#X connect 165 1 64 0;
#X connect 165 2 166 0;
#X connect 165 2 167 0;
#X connect 167 0 177 0;
#X connect 167 2 178 0;
#X connect 172 0 59 0;
#X connect 173 0 59 0;
#X connect 174 0 172 1;
#X connect 175 0 173 1;
#X connect 176 0 175 0;
#X connect 176 0 174 0;
#X connect 180 0 176 0;
#X connect 181 0 179 0;
#X connect 182 0 181 0;
